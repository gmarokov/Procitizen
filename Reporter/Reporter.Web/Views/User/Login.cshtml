@using Reporter.Web.ViewModels.User
@model Reporter.Web.ViewModels.User.LoginViewModel
@{
    ViewBag.Title = "Log in to your community";
}

<div class="ui container content">
    <div class="ui center aligned text-center">
        <div class="ui attached message">
            <div class="header">
                <h3>@ViewBag.Title</h3>
            </div>
            <p>Fill out the form below to sign-up for a new account</p>
        </div>
        @using (Html.BeginForm("Login", "User", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "ui large form form-centered attached segment", role = "form" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="ui stacked">
                <div class="field">
                    <div class="ui left icon input">
                        <i class="mail icon"></i>
                        @Html.TextBoxFor(m => m.Email, new { placeholder = "E-mail address", @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        @Html.PasswordFor(m => m.Password, new { placeholder = "Password", @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="inline field">
                    <div class="ui toggle checkbox">
                        <input type="checkbox" tabindex="0" class="hidden">
                        <label>Remember me?</label>
                    </div>
                </div>

                <div class="ui fluid large blue submit button"><i class="rocket icon"></i> Log me in</div>
            </div>
            <div class="ui error message"></div>
        }
        <div class="ui bottom attached warning message">
            New to us? @Html.ActionLink("Register as a new reporter", "Register")
        </div>

        <div class="ui horizontal divider">
            OR
        </div>
        <h3>Be social and login with your profile</h3>
        <section id="socialLoginForm">
            @Html.Partial("_ExternalLoginsListPartial", new ExternalLoginListViewModel { ReturnUrl = ViewBag.ReturnUrl })
        </section>
    </div>
</div>


@* Enable this once you have account confirmation enabled for password reset functionality
    <p>
        @Html.ActionLink("Forgot your password?", "ForgotPassword")
    </p>*@

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $('.ui.checkbox').checkbox();

        $(document).ready(function () {
            $('.ui.form').form({
                fields: {
                    email: {
                        identifier: 'email',
                        rules: [
                            {
                                type: 'empty',
                                prompt: 'Please enter your e-mail'
                            },
                            {
                                type: 'email',
                                prompt: 'Please enter a valid e-mail'
                            }
                        ]
                    },
                    password: {
                        identifier: 'password',
                        rules: [
                            {
                                type: 'empty',
                                prompt: 'Please enter your password'
                            },
                            {
                                type: 'length[6]',
                                prompt: 'Your password must be at least 6 characters'
                            }
                        ]
                    }
                }
            });
        });
    </script>
}